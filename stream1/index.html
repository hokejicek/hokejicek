<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hokej√≠ƒçek | Stream 1</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #000;
      color: #fff;
      overflow: hidden;
    }

    /* horn√≠ li≈°ta */
    header {
      background: linear-gradient(135deg, #111, #1c1c1c);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.6);
    }
    header .logo {
      font-size: 22px;
      font-weight: 600;
      color: #b34cff;
      letter-spacing: 1px;
      text-decoration: none;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      margin-left: 25px;
      font-weight: 500;
      transition: 0.3s;
    }
    nav a:hover { color: #b34cff; }

    /* rozdƒõlen√≠ obrazovky */
    .container {
      display: flex;
      flex-direction: row;
      height: calc(100vh - 70px);
    }
    .video {
      flex: 3;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px;
    }
    video {
      width: 100%;
      height: 100%;
      background: #000;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
    }

    .chat {
      flex: 1;
      max-width: 420px;
      padding: 10px;
    }
    .chat-box {
      background: #151515;
      border: 2px solid #b34cff;
      border-radius: 12px;
      overflow: hidden;
      height: 100%;
      box-shadow: 0 4px 15px rgba(179, 76, 255, 0.3);
      display: flex;
      flex-direction: column;
    }
    .chat-header {
      background: #b34cff;
      color: #fff;
      font-weight: 600;
      text-align: center;
      padding: 8px;
    }
    #messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 14px;
    }
    #messages p {
      margin: 5px 0;
    }
    form {
      display: flex;
      border-top: 1px solid #333;
    }
    input, button {
      padding: 10px;
      border: none;
      outline: none;
    }
    #username {
      width: 25%;
      background: #222;
      color: #fff;
    }
    #message {
      flex: 1;
      background: #111;
      color: #fff;
    }
    button {
      background: #b34cff;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #9b3ae6; }

    footer {
      background: #111;
      color: #888;
      font-size: 14px;
      text-align: center;
      padding: 15px;
      border-top: 1px solid #2d2d2d;
    }
    footer a { color: #b34cff; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
  </style>

  <!-- Blokace prav√©ho tlaƒç√≠tka a DevTools -->
  <script>
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
      if (
        e.keyCode==123 || // F12
        (e.ctrlKey && e.shiftKey && (e.keyCode==73 || e.keyCode==74)) || // Ctrl+Shift+I/J
        (e.ctrlKey && e.keyCode==85) // Ctrl+U
      ) return false;
    };
  </script>
</head>
<body>

  <header>
    <a href="https://hokejicek.site" class="logo">HOKEJ√çƒåEK</a>
    <nav>
      <a href="/">Hlavn√≠ str√°nka</a>
      <a href="/gdpr">GDPR</a>
    </nav>
  </header>

  <div class="container">
    <!-- video -->
    <div class="video">
      <video id="hls-video" controls autoplay muted></video>
    </div>

    <!-- chat -->
    <div class="chat">
      <div class="chat-box">
        <div class="chat-header">üí¨ Live Chat</div>
        <div id="messages"></div>
        <form id="chatForm">
          <input type="text" id="username" placeholder="Jm√©no" required>
          <input type="text" id="message" placeholder="Napi≈° zpr√°vu..." required>
          <button type="submit">Odeslat</button>
        </form>
      </div>
    </div>
  </div>

  <footer>
    ¬© 2025 Hokej√≠ƒçek. V≈°echna pr√°va vyhrazena. | <a href="/gdpr">GDPR</a>
  </footer>

  <script>
    // HLS p≈ôehr√°vaƒç
    if(Hls.isSupported()) {
      const video = document.getElementById('hls-video');
      const hls = new Hls();
      hls.loadSource("https://extra.oneplay.sbs/5867-2923-2847-5907/tracks-v1a1/mono.ts.m3u8");
      hls.attachMedia(video);
    }

    // CHAT
    async function loadMessages() {
      const res = await fetch("chat.php?action=get");
      const data = await res.json();
      const box = document.getElementById("messages");
      box.innerHTML = "";
      data.forEach(msg => {
        box.innerHTML += `<p><b>${msg.username}</b>: ${msg.message}</p>`;
      });
      box.scrollTop = box.scrollHeight;
    }

    document.getElementById("chatForm").addEventListener("submit", async e => {
      e.preventDefault();
      const username = document.getElementById("username").value;
      const message = document.getElementById("message").value;
      await fetch("chat.php?action=send", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, message })
      });
      document.getElementById("message").value = "";
      loadMessages();
    });

    setInterval(loadMessages, 3000);
    loadMessages();
  </script>

</body>
</html>
